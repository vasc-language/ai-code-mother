# 邀请奖励正确的积分值说明

## ✅ 后端逻辑是正确的！

### 邀请奖励分两个阶段发放

#### 📍 阶段1：用户注册时
```
邀请人获得：20 积分  （INVITE_REGISTER_INVITER_REWARD）
被邀请人获得：20 积分 （INVITE_REGISTER_INVITEE_REWARD）

原因说明：
- 邀请人："邀请新用户注册奖励"
- 被邀请人："接受邀请注册奖励"
```

#### 📍 阶段2：被邀请人首次生成应用时
```
邀请人获得：30 积分  （INVITE_FIRST_GEN_INVITER_REWARD）
被邀请人获得：10 积分  （INVITE_FIRST_GEN_INVITEE_REWARD）

原因说明：
- 邀请人："邀请用户首次生成应用奖励"
- 被邀请人："首次生成应用额外奖励"
```

---

## 📊 实际数据验证

### 被邀请人（338216128179834880）的积分明细

```
时间顺序      | 类型      | 积分  | 原因
-------------|----------|------|------------------------
20:11:08     | 注册     | +30  | 新用户注册奖励
20:11:09     | 邀请     | +20  | 接受邀请注册奖励 ← 阶段1
20:12:43     | 首次生成 | +30  | 首次生成应用奖励
20:12:43     | 邀请     | +10  | 首次生成应用额外奖励 ← 阶段2
-------------|----------|------|------------------------
总计                    | +90  | （30+20+30+10）
```

### 邀请人（336979830630649856）的积分明细

```
时间顺序      | 类型      | 积分  | 原因
-------------|----------|------|------------------------
20:11:09     | 邀请     | +20  | 邀请新用户注册奖励 ← 阶段1
20:12:43     | 邀请     | +30  | 邀请用户首次生成应用奖励 ← 阶段2
-------------|----------|------|------------------------
总计                    | +50  | （20+30）
```

---

## 🎯 总结

### 邀请奖励总览

| 角色 | 注册时 | 首次生成时 | 总计 |
|------|--------|-----------|------|
| **邀请人** | +20 | +30 | **50积分** |
| **被邀请人** | +20 | +10 | **30积分** |

### 为什么这样设计？

1. **注册奖励相同（20+20）**
   - 降低邀请门槛，双方都有动力
   - 快速获得积分体验产品

2. **首次生成奖励不同（30+10）**
   - 邀请人获得更多奖励（30），激励持续邀请
   - 被邀请人获得额外奖励（10），鼓励尝试生成

3. **总奖励差异（50 vs 30）**
   - 邀请人总奖励更高，体现邀请价值
   - 被邀请人仍有充足积分使用（总共60积分：30注册+20邀请注册+10首次生成奖励）

---

## 📱 前端显示建议

### 当前问题
前端只显示 "+20"，用户可能误以为只有20积分。

### 建议修复

#### 方案1：分开显示
```vue
<!-- 积分明细页面 -->
<div v-for="record in pointsRecords" :key="record.id">
  <div class="record-item">
    <span class="type">{{ record.reason }}</span>
    <span class="points">+{{ record.points }}</span>
  </div>
</div>

<!-- 应该显示：-->
<!-- 接受邀请注册奖励  +20 -->
<!-- 首次生成应用额外奖励 +10 -->
```

#### 方案2：汇总显示
```vue
<!-- 邀请页面 -->
<div class="invite-rewards">
  <h3>邀请奖励说明</h3>
  <ul>
    <li>好友注册：您获得 20 积分，好友获得 20 积分</li>
    <li>好友首次生成：您获得 30 积分，好友获得 10 积分</li>
    <li class="total">总计：您可获得 50 积分，好友可获得 30 积分</li>
  </ul>
</div>
```

#### 方案3：实时提示
```javascript
// 注册成功后
showMessage('注册成功！获得 20 积分，首次生成还可获得 10 积分奖励');

// 首次生成后
showMessage('首次生成成功！获得 30 积分 + 邀请奖励 10 积分');
```

---

## 🔢 正确的积分值对照表

### 常量定义位置
`src/main/java/com/spring/aicodemother/constants/PointsConstants.java`

### 完整的邀请奖励常量
```java
// 注册阶段
public static final int INVITE_REGISTER_INVITER_REWARD = 20;  // 邀请人
public static final int INVITE_REGISTER_INVITEE_REWARD = 20;  // 被邀请人

// 首次生成阶段
public static final int INVITE_FIRST_GEN_INVITER_REWARD = 30; // 邀请人
public static final int INVITE_FIRST_GEN_INVITEE_REWARD = 10; // 被邀请人
```

---

**文档生成时间：** 2025-10-21  
**结论：** 后端逻辑正确，前端显示需优化
