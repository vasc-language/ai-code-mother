# 模型定价修正说明

## 修正内容概览

### 修正前的主要问题

1. **等级与价格不匹配**
   - ❌ GPT-5 Codex 低配版(HARD): 27.00积分/1K
   - ❌ GPT-5 标准版(EXPERT): 15.00积分/1K
   - 问题：HARD级别比EXPERT贵80%

2. **命名与定价矛盾**
   - ❌ GPT-5 中配版: 8.00积分/1K
   - ❌ GPT-5 Codex 低配版: 27.00积分/1K
   - 问题："低配"比"中配"贵3.4倍

3. **同级别内部差异过大**
   - ❌ HARD级别：8.00 ~ 27.00（差异3.4倍）
   - 问题：用户选择困难

### 修正后的合理配置

#### SIMPLE 级别（1-2积分/1K）
| 模型 | 倍率 | 质量系数 | 实际价值 | 适用场景 |
|------|-----|---------|---------|----------|
| Codex Mini 免费版 | 2 | 0.80 | 1.60 | 快速原型 |
| GPT-5 精简版 | 2 | 0.80 | 1.60 | 简单页面 |
| GPT-5 低配版 | 2 | 0.75 | 1.50 | 入门练习 |

#### MEDIUM 级别（3-5积分/1K）
| 模型 | 倍率 | 质量系数 | 实际价值 | 适用场景 |
|------|-----|---------|---------|----------|
| GPT-5 标准版 | 3 | 1.00 | 3.00 | 标准应用 |
| Qwen3 Coder | 3 | 1.00 | 3.00 | **推荐**常规项目 |
| Qwen Coder 32B Free | 3 | 1.10 | 3.30 | 专业编程 |
| GPT-5 中配版 | 5 | 1.15 | 5.75 | 进阶项目 |

#### HARD 级别（8-12积分/1K）
| 模型 | 倍率 | 质量系数 | 实际价值 | 适用场景 |
|------|-----|---------|---------|----------|
| Qwen3 Coder Plus | 10 | 1.40 | 14.00 | 企业应用 |
| GPT-5 高配版 | 10 | 1.50 | 15.00 | 复杂业务 |
| DeepSeek R1 | 10 | 1.50 | 15.00 | **推荐**架构设计 |
| DeepSeek V3.1 | 10 | 1.40 | 14.00 | 全栈开发 |
| DeepSeek V3.2 | 12 | 1.50 | 18.00 | 最新增强 |
| DeepSeek R1 0528 | 12 | 1.60 | 19.20 | 推理增强 |
| GPT-5 Codex 中配版 | 10 | 1.50 | 15.00 | 标准企业 |

#### EXPERT 级别（15-20积分/1K）
| 模型 | 倍率 | 质量系数 | 实际价值 | 适用场景 |
|------|-----|---------|---------|----------|
| GPT-5 Codex 高配版 | 15 | 1.70 | 25.50 | 企业级 |
| GPT-5 Codex 编程版 | 15 | 1.80 | 27.00 | **推荐**顶级质量 |
| Qwen3 Max Preview | 15 | 1.75 | 26.25 | 复杂架构 |
| GPT-5 Codex 旗舰版 | 18 | 1.90 | 34.20 | 旗舰级 |
| Qwen3 235B 思维版 | 20 | 2.00 | 40.00 | 巅峰代码艺术 |

## 执行步骤

### 1. 备份数据（重要！）
```bash
mysqldump -u root -p ai_code_mother ai_model_config > backup_ai_model_config_$(date +%Y%m%d).sql
```

### 2. 执行修正脚本
```bash
mysql -u root -p ai_code_mother < D:\Java\ai-code\ai-code-mother\sql\fix_model_config_pricing.sql
```

### 3. 验证修正结果
脚本执行后会自动显示：
- ✅ 修正后的完整配置表
- ✅ 各等级的统计信息
- ✅ 异常配置检查结果
- ✅ 各等级推荐模型

### 4. 重启应用
```bash
mvnw.cmd spring-boot:run
```

## 修正效果对比

### 等级价格区间
| 等级 | 修正前范围 | 修正后范围 | 改进 |
|------|-----------|-----------|------|
| SIMPLE | 2-3 | 1.50-1.60 | ✅ 更低价 |
| MEDIUM | 3-4.40 | 3.00-5.75 | ✅ 区间合理 |
| HARD | 8-27 | 14-19.20 | ✅ 消除3倍差异 |
| EXPERT | 15-27 | 25.50-40.00 | ✅ 体现顶级价值 |

### 等级递进性
```
修正前：SIMPLE(1.60) → MEDIUM(4.40) → HARD(8-27混乱) → EXPERT(15-27混乱)
修正后：SIMPLE(1.60) → MEDIUM(3-5.75) → HARD(14-19) → EXPERT(25-40) ✅
```

### 命名一致性
```
修正前：
❌ GPT-5 Codex 低配版 = 27.00（最贵）
❌ GPT-5 Codex 中配版 = 10.00
❌ GPT-5 Codex 高配版 = 15.00

修正后：
✅ GPT-5 Codex 中配版 = 15.00（HARD）
✅ GPT-5 Codex 高配版 = 25.50（EXPERT）
✅ GPT-5 Codex 旗舰版 = 34.20（最高）
```

## 用户体验改善

### 场景1：新手用户（50积分）
```
修正前：只能用MEDIUM模型生成11次
修正后：
- SIMPLE模型：31次（Codex Mini 1.60/次）
- MEDIUM模型：16次（Qwen3 Coder 3.00/次）
选择更多样化 ✅
```

### 场景2：专业用户（500积分）
```
修正前：
- HARD级别混乱，不知道选哪个
- "低配版"27积分竟然最贵

修正后：
- HARD推荐：DeepSeek R1（15.00）可用33次
- 清晰的等级递进：14→15→18→19.20
选择清晰明了 ✅
```

### 场景3：企业用户（追求质量）
```
修正前：
- EXPERT最高只有27积分
- 顶级模型不够顶级

修正后：
- 旗舰版：34.20积分（质量1.9）
- 思维版：40.00积分（质量2.0）
真正体现顶级价值 ✅
```

## 风险提示

### 潜在影响
1. **积分消耗变化**
   - HARD级别用户：消耗降低（27→15，节省44%）
   - EXPERT级别用户：消耗增加（15→27，提升80%）
   
2. **用户习惯调整**
   - 原EXPERT用户可能转向HARD级别
   - 需要通过公告解释调整原因

### 建议措施
1. **发布公告**
   ```
   【系统优化】模型定价体系优化
   - 修正等级划分，使价格更合理
   - HARD级别性价比提升
   - EXPERT级别体现顶级价值
   - 所有用户补偿100积分
   ```

2. **补偿方案**
   ```sql
   -- 给所有用户补偿100积分
   UPDATE user_points 
   SET availablePoints = availablePoints + 100,
       totalPoints = totalPoints + 100;
       
   INSERT INTO points_record (userId, points, balance, type, reason, createTime)
   SELECT 
       userId,
       100,
       availablePoints,
       'SYSTEM',
       '模型定价优化补偿',
       NOW()
   FROM user_points;
   ```

3. **观察期**
   - 上线后观察3天用户使用情况
   - 根据数据微调质量系数
   - 收集用户反馈

## 常见问题

### Q1: 为什么EXPERT级别价格提高了？
A: 原配置中EXPERT级别定价过低，无法体现顶级模型的价值。修正后的EXPERT模型提供：
- 完整的架构设计
- 详细的代码注释
- 完善的错误处理
- 包含测试用例
- 代码艺术级质量

### Q2: 我习惯用的模型改变了怎么办？
A: 
- 原EXPERT用户 → 推荐使用HARD级别的DeepSeek R1（质量相当，价格更优）
- 原HARD高价用户 → 自动降价，无需调整
- 系统补偿100积分

### Q3: 如何选择合适的模型？
A:
- **学习/练习** → SIMPLE级别（Codex Mini）
- **日常开发** → MEDIUM级别（Qwen3 Coder）推荐
- **企业项目** → HARD级别（DeepSeek R1）推荐
- **顶级要求** → EXPERT级别（GPT-5 Codex编程版）

## 联系支持

如有问题或建议，请联系：
- 技术支持：support@example.com
- 反馈渠道：在线客服/用户群

---

**最后更新**: 2025-10-18  
**版本**: v1.0
