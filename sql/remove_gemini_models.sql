-- ======================================================
-- 删除 Gemini 模型
-- 日期: 2025-10-30
-- 描述: 从数据库中彻底删除 gemini-2.5-flash 和 gemini-2.5-pro
-- ======================================================

USE ai_code_mother;

-- ======================================================
-- 1. 查看要删除的模型信息（确认）
-- ======================================================
SELECT
    id,
    model_key AS '模型标识',
    model_name AS '模型名称',
    provider AS '提供商',
    is_enabled AS '是否启用'
FROM ai_model_config
WHERE model_key IN ('gemini-2.5-flash', 'gemini-2.5-pro');

-- ======================================================
-- 2. 删除 Gemini 模型
-- ======================================================
DELETE FROM ai_model_config
WHERE model_key IN ('gemini-2.5-flash', 'gemini-2.5-pro');

-- ======================================================
-- 3. 验证删除结果
-- ======================================================
SELECT
    '===== 删除结果验证 =====' AS '检查';

SELECT
    COUNT(*) AS '剩余 Gemini 模型数量（应该为0）'
FROM ai_model_config
WHERE model_key IN ('gemini-2.5-flash', 'gemini-2.5-pro');

-- ======================================================
-- 4. 查看当前所有启用的模型
-- ======================================================
SELECT
    '===== 当前启用的模型列表 =====' AS '参考';

SELECT
    model_key AS '模型标识',
    model_name AS '模型名称',
    provider AS '提供商',
    tier AS '等级',
    sort_order AS '排序'
FROM ai_model_config
WHERE is_enabled = 1
  AND (is_delete = 0 OR is_delete IS NULL)
ORDER BY sort_order;

-- ======================================================
-- 脚本执行完成
-- ======================================================
